apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  generateName: my-pipeline-
spec:
  steps:
  - uses:
      git: tektoncd/catalog/task/kaniko/0.1/kaniko.yaml
      step: build-and-push
  - uses:
      git: tektoncd/catalog/task/kaniko/0.1/kaniko.yaml
      step: write-digest
    env:
      - name: MY_VAR
        value: CHEESE
  - name: my-custom-step
    image: golang:1.15
    script: |
      #!/bin/sh
      echo "hello world"
  - uses:
      git: tektoncd/catalog/task/kaniko/0.1/kaniko.yaml
      step: digest-to-results
